<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>日本語用語集 | Nihongo Glossary</title>
    
    <!-- PWA / Home Screen Icon -->
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icon-192.png">
    <link rel="icon" type="image/png" sizes="192x192" href="icon-192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="icon-512.png">
    <meta name="theme-color" content="#1a1a2e">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="日本語用語集">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Hiragino Sans', 'Noto Sans JP', sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            color: #e0e0e0;
            padding: 20px;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
        }
        
        h1 {
            font-size: 2.5rem;
            color: #00d9ff;
            margin-bottom: 10px;
            text-shadow: 0 0 20px rgba(0, 217, 255, 0.3);
        }
        
        .subtitle {
            color: #888;
            font-size: 1.1rem;
        }

        .word-count {
            color: #666;
            font-size: 0.9rem;
            margin-top: 10px;
        }

        /* Tabs */
        .tabs-container {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            overflow: hidden;
            margin-bottom: 30px;
        }

        .tabs-header {
            display: flex;
            flex-wrap: wrap;
            background: rgba(0, 0, 0, 0.2);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding: 8px;
            gap: 6px;
        }

        .tab-btn {
            padding: 10px 14px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            color: #888;
            font-size: 0.85rem;
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .tab-btn:hover {
            color: #fff;
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.2);
        }

        .tab-btn.active {
            color: #00d9ff;
            border-color: #00d9ff;
            background: rgba(0, 217, 255, 0.15);
        }

        .tab-icon {
            font-size: 1.1rem;
        }

        .tab-content {
            display: none;
            padding: 20px;
            max-height: 70vh;
            overflow-y: auto;
        }

        .tab-content::-webkit-scrollbar {
            width: 8px;
        }

        .tab-content::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 4px;
        }

        .tab-content::-webkit-scrollbar-thumb {
            background: rgba(0, 217, 255, 0.3);
            border-radius: 4px;
        }

        .tab-content::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 217, 255, 0.5);
        }

        .tab-content.active {
            display: block;
        }

        .tab-title {
            font-size: 1.3rem;
            color: #fff;
            margin-bottom: 5px;
        }

        .tab-subtitle {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 20px;
        }

        /* Search */
        .search-box {
            margin-bottom: 20px;
        }

        .search-input {
            width: 100%;
            padding: 12px 16px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            color: #fff;
            font-size: 1rem;
            outline: none;
            transition: all 0.2s ease;
        }

        .search-input::placeholder {
            color: #666;
        }

        .search-input:focus {
            border-color: rgba(0, 217, 255, 0.5);
            box-shadow: 0 0 15px rgba(0, 217, 255, 0.1);
        }

        /* Table */
        .glossary-table {
            width: 100%;
            border-collapse: collapse;
        }

        .glossary-table th {
            background: rgba(0, 217, 255, 0.1);
            padding: 12px 16px;
            text-align: left;
            font-weight: 600;
            color: #00d9ff;
            cursor: pointer;
            user-select: none;
            border-bottom: 2px solid rgba(0, 217, 255, 0.3);
            transition: background 0.2s ease;
            white-space: nowrap;
        }

        .glossary-table th:hover {
            background: rgba(0, 217, 255, 0.2);
        }

        .glossary-table th .sort-icon {
            margin-left: 6px;
            opacity: 0.5;
            font-size: 0.8rem;
        }

        .glossary-table th.sort-asc .sort-icon,
        .glossary-table th.sort-desc .sort-icon {
            opacity: 1;
        }

        .glossary-table td {
            padding: 12px 16px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            vertical-align: middle;
        }

        .glossary-table tr:hover td {
            background: rgba(255, 255, 255, 0.03);
        }

        .glossary-table tr.hidden {
            display: none;
        }

        .kanji {
            font-size: 1.3rem;
            font-weight: 500;
        }

        .kanji a {
            color: #fff;
            text-decoration: none;
            transition: all 0.2s ease;
            border-bottom: 1px solid #00d9ff;
        }

        .kanji a:hover {
            color: #00d9ff;
        }

        .hiragana {
            color: #aaa;
            font-size: 0.95rem;
        }

        .english {
            color: #ccc;
        }

        /* Section dividers */
        .section-header {
            background: rgba(255, 255, 255, 0.05);
            padding: 8px 16px;
            color: #888;
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Stats */
        .stats {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .stat {
            background: rgba(0, 0, 0, 0.2);
            padding: 12px 20px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #00d9ff;
        }

        .stat-label {
            font-size: 0.8rem;
            color: #666;
        }

        /* Footer */
        footer {
            text-align: center;
            margin-top: 30px;
            padding: 20px;
            color: #444;
            font-size: 0.85rem;
        }
        
        footer a {
            color: #00d9ff;
            text-decoration: none;
        }

        footer a:hover {
            text-decoration: underline;
        }

        /* Mobile */
        @media (max-width: 600px) {
            h1 {
                font-size: 1.8rem;
            }

            .tab-btn {
                padding: 12px 14px;
                font-size: 0.85rem;
            }

            .glossary-table th,
            .glossary-table td {
                padding: 10px 12px;
            }

            .kanji {
                font-size: 1.1rem;
            }
        }

        /* Quick links */
        .quick-links {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .quick-link {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 8px 14px;
            color: #00d9ff;
            text-decoration: none;
            font-size: 0.85rem;
            transition: all 0.3s ease;
        }

        .quick-link:hover {
            background: rgba(0, 217, 255, 0.15);
            border-color: rgba(0, 217, 255, 0.3);
            transform: translateY(-2px);
        }

        .toggle-btn {
            cursor: pointer;
            font-family: inherit;
        }

        .toggle-indicator {
            font-size: 0.7rem;
            padding: 2px 6px;
            border-radius: 4px;
            background: rgba(255, 255, 255, 0.1);
            margin-left: 4px;
        }

        .toggle-btn.active {
            background: rgba(0, 150, 110, 0.3);
            border-color: rgba(0, 200, 150, 0.5);
        }

        .toggle-btn.active .toggle-indicator {
            background: rgba(0, 200, 150, 0.4);
            color: #fff;
        }

        .bulgarian {
            color: #7dd3a8;
        }

        .bg-column {
            display: none;
        }

        .show-bulgarian .bg-column {
            display: table-cell;
        }

        /* No results */
        .no-results {
            text-align: center;
            padding: 40px;
            color: #666;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>🇯🇵 日本語用語集</h1>
            <p class="subtitle">Nihongo Glossary - Japanese Terminology</p>
            <p class="word-count" id="totalCount">Loading...</p>
        </header>

        <div class="quick-links">
            <a href="https://jisho.org" target="_blank" class="quick-link">📖 Jisho.org</a>
            <a href="https://www.tanoshiijapanese.com/dictionary/" target="_blank" class="quick-link">📚 Tanoshii</a>
            <a href="https://japandict.com/" target="_blank" class="quick-link">🔍 JapanDict</a>
            <button class="quick-link toggle-btn" id="bgToggle" onclick="toggleBulgarian()">
                <span class="toggle-flag">🇧🇬</span>
                <span class="toggle-label">Български</span>
                <span class="toggle-indicator" id="bgIndicator">OFF</span>
            </button>
        </div>

        <div class="tabs-container">
            <div class="tabs-header" id="tabsHeader"></div>
            <div id="tabsContent"></div>
        </div>

        <footer>
            <p>Click column headers to sort • Click any word to look up on <a href="https://jisho.org" target="_blank">Jisho.org</a></p>
            <p style="margin-top: 10px;">⚡ Built by SierraVictor</p>
        </footer>
    </div>

    <script>
        // Glossary data organized by topic
        const glossaryData = {
            paragliding: {
                icon: "🪂",
                name: "Paragliding",
                nameJp: "パラグライダー用語",
                words: [
                    ["離陸", "りりく", "takeoff", "излитане"],
                    ["着陸", "ちゃくりく", "landing", "кацане"],
                    ["滑空", "かっくう", "gliding", "планиране"],
                    ["上昇気流", "じょうしょうきりゅう", "thermal / rising air current", "термик / възходящ въздушен поток"],
                    ["風向", "ふうこう", "wind direction", "посока на вятъра"],
                    ["風速", "ふうそく", "wind speed", "скорост на вятъра"],
                    ["翼", "つばさ", "wing", "крило"],
                    ["操縦", "そうじゅう", "control / piloting", "управление / пилотиране"],
                    ["高度", "こうど", "altitude", "височина"],
                    ["高度計", "こうどけい", "altimeter", "висотомер"],
                    ["安全帯", "あんぜんたい", "harness / safety belt", "сбруя / предпазен колан"],
                    ["緊急着陸", "きんきゅうちゃくりく", "emergency landing", "аварийно кацане"],
                    ["飛行場", "ひこうじょう", "airfield", "летище"],
                    ["滑走路", "かっそうろ", "runway", "писта"],
                    ["気象", "きしょう", "weather", "метеорология"],
                    ["天候", "てんこう", "weather conditions", "метеорологични условия"],
                    ["雲", "くも", "cloud", "облак"],
                    ["積雲", "せきうん", "cumulus cloud", "купест облак"],
                    ["乱気流", "らんきりゅう", "turbulence", "турбуленция"],
                    ["突風", "とっぷう", "gust", "порив"],
                    ["無風", "むふう", "no wind / calm", "безветрие / тихо"],
                    ["微風", "びふう", "light breeze", "лек бриз"],
                    ["強風", "きょうふう", "strong wind", "силен вятър"],
                    ["向かい風", "むかいかぜ", "headwind", "насрещен вятър"],
                    ["追い風", "おいかぜ", "tailwind", "попътен вятър"],
                    ["横風", "よこかぜ", "crosswind", "страничен вятър"],
                    ["地上", "ちじょう", "ground", "земя"],
                    ["上空", "じょうくう", "sky / above", "небе / горе"],
                    ["旋回", "せんかい", "turn / circling", "завой / кръжене"],
                    ["急降下", "きゅうこうか", "dive / rapid descent", "пикиране / бързо спускане"],
                    ["水平飛行", "すいへいひこう", "level flight", "хоризонтален полет"],
                    ["着地", "ちゃくち", "touchdown", "приземяване"],
                    ["墜落", "ついらく", "crash", "катастрофа"],
                    ["遭難", "そうなん", "distress / accident", "бедствие / инцидент"],
                    ["救助", "きゅうじょ", "rescue", "спасяване"],
                    ["訓練", "くんれん", "training", "обучение"],
                    ["初心者", "しょしんしゃ", "beginner", "начинаещ"],
                    ["経験者", "けいけんしゃ", "experienced person", "опитен"],
                    ["資格", "しかく", "qualification / license", "квалификация / лиценз"],
                    ["許可", "きょか", "permission", "разрешение"],
                    ["禁止", "きんし", "prohibited", "забранено"],
                    ["注意", "ちゅうい", "caution", "внимание"],
                    ["危険", "きけん", "danger", "опасност"],
                    ["安全", "あんぜん", "safety", "безопасност"],
                    ["点検", "てんけん", "inspection", "проверка"],
                    ["整備", "せいび", "maintenance", "поддръжка"],
                    ["装備", "そうび", "equipment", "екипировка"],
                    ["予備", "よび", "spare / reserve", "резерва"],
                    ["出発", "しゅっぱつ", "departure", "заминаване"],
                    ["到着", "とうちゃく", "arrival", "пристигане"]
                ]
            },
            sailing: {
                icon: "⛵",
                name: "Sailing",
                nameJp: "ヨット・セーリング用語",
                words: [
                    ["帆", "ほ", "sail", "платно"],
                    ["舵", "かじ", "rudder / helm", "кормило"],
                    ["船首", "せんしゅ", "bow (front)", "нос (преден)"],
                    ["船尾", "せんび", "stern (back)", "кърма (заден)"],
                    ["甲板", "かんぱん", "deck", "палуба"],
                    ["船底", "せんてい", "hull bottom", "дъно на корпуса"],
                    ["錨", "いかり", "anchor", "котва"],
                    ["港", "みなと", "harbor / port", "пристанище"],
                    ["帆柱", "ほばしら", "mast", "мачта"],
                    ["索具", "さくぐ", "rigging", "такелаж"],
                    ["風上", "かざかみ", "windward / upwind", "навятър"],
                    ["風下", "かざしも", "leeward / downwind", "подветрено"],
                    ["追い風", "おいかぜ", "tailwind", "попътен вятър"],
                    ["向かい風", "むかいかぜ", "headwind", "насрещен вятър"],
                    ["横風", "よこかぜ", "crosswind", "страничен вятър"],
                    ["転覆", "てんぷく", "capsizing", "преобръщане"],
                    ["左舷", "さげん", "port (left side)", "ляв борд"],
                    ["右舷", "うげん", "starboard (right side)", "десен борд"],
                    ["船長", "せんちょう", "captain", "капитан"],
                    ["乗組員", "のりくみいん", "crew", "екипаж"],
                    ["航海", "こうかい", "voyage / navigation", "плаване / навигация"],
                    ["出航", "しゅっこう", "departure / sailing out", "отплаване"],
                    ["入港", "にゅうこう", "entering port", "влизане в пристанище"],
                    ["停泊", "ていはく", "anchoring / mooring", "акостиране"],
                    ["浮標", "ふひょう", "buoy", "шамандура"],
                    ["灯台", "とうだい", "lighthouse", "фар"],
                    ["海図", "かいず", "nautical chart", "морска карта"],
                    ["羅針盤", "らしんばん", "compass", "компас"],
                    ["潮流", "ちょうりゅう", "tidal current", "приливно течение"],
                    ["満潮", "まんちょう", "high tide", "прилив"],
                    ["干潮", "かんちょう", "low tide", "отлив"],
                    ["波", "なみ", "wave", "вълна"],
                    ["高波", "たかなみ", "high waves", "високи вълни"],
                    ["凪", "なぎ", "calm sea", "тихо море"],
                    ["嵐", "あらし", "storm", "буря"],
                    ["暴風", "ぼうふう", "gale / storm wind", "ураган"],
                    ["霧", "きり", "fog", "мъгла"],
                    ["視界", "しかい", "visibility", "видимост"],
                    ["海面", "かいめん", "sea surface", "морска повърхност"],
                    ["水深", "すいしん", "water depth", "дълбочина"],
                    ["浅瀬", "あさせ", "shoal / shallow water", "плитчина"],
                    ["岩礁", "がんしょう", "reef / rocks", "риф / скали"],
                    ["座礁", "ざしょう", "running aground", "засядане на плитчина"],
                    ["救命胴衣", "きゅうめいどうい", "life jacket", "спасителна жилетка"],
                    ["救命艇", "きゅうめいてい", "lifeboat", "спасителна лодка"],
                    ["信号旗", "しんごうき", "signal flag", "сигнално знаме"],
                    ["遭難信号", "そうなんしんごう", "distress signal", "сигнал за бедствие"],
                    ["曳航", "えいこう", "towing", "теглене"],
                    ["係留", "けいりゅう", "mooring", "завързване"],
                    ["桟橋", "さんばし", "pier / jetty", "кей"]
                ]
            },
            kiteboarding: {
                icon: "🪁🏄",
                name: "Kiteboarding",
                nameJp: "カイトボード用語",
                words: [
                    ["凧", "たこ", "kite", "кайт / хвърчило"],
                    ["板", "いた", "board", "дъска"],
                    ["波", "なみ", "wave", "вълна"],
                    ["浜", "はま", "beach", "плаж"],
                    ["風速", "ふうそく", "wind speed", "скорост на вятъра"],
                    ["浮力", "ふりょく", "buoyancy", "плавателност"],
                    ["跳躍", "ちょうやく", "jump", "скок"],
                    ["着水", "ちゃくすい", "water landing", "приводняване"],
                    ["救命胴衣", "きゅうめいどうい", "life jacket", "спасителна жилетка"],
                    ["安全索", "あんぜんさく", "safety leash", "предпазен ремък"],
                    ["操作", "そうさ", "control / operation", "управление"],
                    ["発進", "はっしん", "launch", "старт"],
                    ["停止", "ていし", "stop", "спиране"],
                    ["方向転換", "ほうこうてんかん", "change direction", "смяна на посока"],
                    ["加速", "かそく", "acceleration", "ускорение"],
                    ["減速", "げんそく", "deceleration", "забавяне"],
                    ["滑走", "かっそう", "gliding / sliding", "плъзгане"],
                    ["転倒", "てんとう", "fall / tumble", "падане"],
                    ["回転", "かいてん", "rotation / spin", "въртене"],
                    ["上昇", "じょうしょう", "ascent / rising", "изкачване"],
                    ["下降", "かこう", "descent", "спускане"],
                    ["浮上", "ふじょう", "surfacing", "изплуване"],
                    ["沈没", "ちんぼつ", "sinking", "потъване"],
                    ["牽引", "けんいん", "towing / pulling", "теглене"],
                    ["張力", "ちょうりょく", "tension", "напрежение"],
                    ["弛み", "たるみ", "slack", "отпускане"],
                    ["海岸", "かいがん", "coast / shore", "бряг"],
                    ["沖", "おき", "offshore", "в открито море"],
                    ["岸", "きし", "shore", "бряг"],
                    ["砂浜", "すなはま", "sandy beach", "пясъчен плаж"],
                    ["波打ち際", "なみうちぎわ", "water's edge", "линия на прибоя"],
                    ["潮", "しお", "tide", "прилив"],
                    ["流れ", "ながれ", "current", "течение"],
                    ["渦", "うず", "whirlpool / vortex", "водовъртеж"],
                    ["水温", "すいおん", "water temperature", "температура на водата"],
                    ["日焼け", "ひやけ", "sunburn", "слънчево изгаряне"],
                    ["熱中症", "ねっちゅうしょう", "heatstroke", "топлинен удар"],
                    ["脱水", "だっすい", "dehydration", "дехидратация"],
                    ["防水", "ぼうすい", "waterproof", "водоустойчив"],
                    ["耐久性", "たいきゅうせい", "durability", "издръжливост"],
                    ["修理", "しゅうり", "repair", "ремонт"],
                    ["交換", "こうかん", "replacement", "смяна"],
                    ["調整", "ちょうせい", "adjustment", "настройка"],
                    ["初級", "しょきゅう", "beginner level", "начално ниво"],
                    ["中級", "ちゅうきゅう", "intermediate level", "средно ниво"],
                    ["上級", "じょうきゅう", "advanced level", "напреднало ниво"],
                    ["講習", "こうしゅう", "lessons / course", "курс"],
                    ["練習", "れんしゅう", "practice", "практика"],
                    ["技術", "ぎじゅつ", "technique / skill", "техника"],
                    ["競技", "きょうぎ", "competition", "състезание"]
                ]
            },
            kiteflying: {
                icon: "🪁",
                name: "Kite Flying",
                nameJp: "凧揚げ用語",
                words: [
                    ["凧", "たこ", "kite", "хвърчило"],
                    ["凧揚げ", "たこあげ", "kite flying", "пускане на хвърчило"],
                    ["糸", "いと", "string / thread", "връв / конец"],
                    ["糸巻き", "いとまき", "spool / reel", "макара"],
                    ["風", "かぜ", "wind", "вятър"],
                    ["尾", "お", "tail", "опашка"],
                    ["骨組み", "ほねぐみ", "frame / skeleton", "рамка / скелет"],
                    ["紙", "かみ", "paper", "хартия"],
                    ["布", "ぬの", "cloth / fabric", "плат"],
                    ["揚げる", "あげる", "to fly / raise up", "пускам / вдигам"],
                    ["和凧", "わだこ", "Japanese kite", "японско хвърчило"],
                    ["連凧", "れんだこ", "train kite (multiple)", "верига от хвърчила"],
                    ["角凧", "かくだこ", "square kite", "квадратно хвърчило"],
                    ["奴凧", "やっこだこ", "yakko kite (servant)", "яко хвърчило"],
                    ["蝶凧", "ちょうだこ", "butterfly kite", "пеперуда хвърчило"],
                    ["龍凧", "りゅうだこ", "dragon kite", "драконово хвърчило"],
                    ["絵凧", "えだこ", "picture kite", "картинно хвърчило"],
                    ["武者凧", "むしゃだこ", "warrior kite", "самурайско хвърчило"],
                    ["正月", "しょうがつ", "New Year", "Нова година"],
                    ["伝統", "でんとう", "tradition", "традиция"],
                    ["祭り", "まつり", "festival", "фестивал"],
                    ["大会", "たいかい", "competition / event", "състезание"],
                    ["空", "そら", "sky", "небе"],
                    ["青空", "あおぞら", "blue sky", "синьо небе"],
                    ["雲", "くも", "cloud", "облак"],
                    ["晴れ", "はれ", "clear weather", "ясно време"],
                    ["曇り", "くもり", "cloudy", "облачно"],
                    ["風向き", "かざむき", "wind direction", "посока на вятъра"],
                    ["そよ風", "そよかぜ", "gentle breeze", "лек бриз"],
                    ["強風", "きょうふう", "strong wind", "силен вятър"],
                    ["無風", "むふう", "no wind", "безветрие"],
                    ["上昇", "じょうしょう", "rising / ascent", "издигане"],
                    ["下降", "かこう", "descending", "спускане"],
                    ["安定", "あんてい", "stability", "стабилност"],
                    ["不安定", "ふあんてい", "unstable", "нестабилен"],
                    ["墜落", "ついらく", "crash / fall", "падане"],
                    ["絡まる", "からまる", "to get tangled", "заплитам се"],
                    ["切れる", "きれる", "to break / snap", "скъсвам се"],
                    ["飛ぶ", "とぶ", "to fly", "летя"],
                    ["舞う", "まう", "to dance / flutter", "танцувам / пърхам"],
                    ["広場", "ひろば", "open space / plaza", "площад"],
                    ["河川敷", "かせんじき", "riverbed area", "речно корито"],
                    ["公園", "こうえん", "park", "парк"],
                    ["海岸", "かいがん", "beach / coast", "плаж / бряг"],
                    ["電線", "でんせん", "power lines", "електропроводи"],
                    ["木", "き", "tree", "дърво"],
                    ["障害物", "しょうがいぶつ", "obstacle", "препятствие"],
                    ["手作り", "てづくり", "handmade", "ръчна изработка"],
                    ["職人", "しょくにん", "craftsman", "занаятчия"],
                    ["芸術", "げいじゅつ", "art", "изкуство"]
                ]
            },
            aerodynamics: {
                icon: "✈️",
                name: "Aerodynamics",
                nameJp: "空気力学用語",
                words: [
                    ["空気力学", "くうきりきがく", "aerodynamics", "аеродинамика"],
                    ["揚力", "ようりょく", "lift", "подемна сила"],
                    ["抗力", "こうりょく", "drag", "съпротивление"],
                    ["推力", "すいりょく", "thrust", "тяга"],
                    ["重力", "じゅうりょく", "gravity", "гравитация"],
                    ["気流", "きりゅう", "airflow / air current", "въздушен поток"],
                    ["乱気流", "らんきりゅう", "turbulence", "турбуленция"],
                    ["層流", "そうりゅう", "laminar flow", "ламинарен поток"],
                    ["翼型", "よくがた", "airfoil", "профил на крило"],
                    ["迎角", "げいかく", "angle of attack", "ъгъл на атака"],
                    ["失速", "しっそく", "stall", "загуба на скорост"],
                    ["空気抵抗", "くうきていこう", "air resistance", "въздушно съпротивление"],
                    ["圧力", "あつりょく", "pressure", "налягане"],
                    ["密度", "みつど", "density", "плътност"],
                    ["速度", "そくど", "velocity / speed", "скорост"],
                    ["流体力学", "りゅうたいりきがく", "fluid dynamics", "флуидна динамика"],
                    ["境界層", "きょうかいそう", "boundary layer", "граничен слой"],
                    ["渦", "うず", "vortex", "вихър"],
                    ["音速", "おんそく", "speed of sound", "скорост на звука"],
                    ["超音速", "ちょうおんそく", "supersonic", "свръхзвуков"],
                    ["亜音速", "あおんそく", "subsonic", "дозвуков"],
                    ["遷音速", "せんおんそく", "transonic", "трансзвуков"],
                    ["衝撃波", "しょうげきは", "shock wave", "ударна вълна"],
                    ["圧縮性", "あっしゅくせい", "compressibility", "свиваемост"],
                    ["粘性", "ねんせい", "viscosity", "вискозитет"],
                    ["摩擦", "まさつ", "friction", "триене"],
                    ["抵抗係数", "ていこうけいすう", "drag coefficient", "коефициент на съпротивление"],
                    ["揚力係数", "ようりょくけいすう", "lift coefficient", "коефициент на подемна сила"],
                    ["揚抗比", "ようこうひ", "lift-to-drag ratio", "съотношение подем/съпротивление"],
                    ["風洞", "ふうどう", "wind tunnel", "аеродинамичен тунел"],
                    ["実験", "じっけん", "experiment", "експеримент"],
                    ["計測", "けいそく", "measurement", "измерване"],
                    ["解析", "かいせき", "analysis", "анализ"],
                    ["数値計算", "すうちけいさん", "numerical calculation", "числено изчисление"],
                    ["模型", "もけい", "model", "модел"],
                    ["縮尺", "しゅくしゃく", "scale", "мащаб"],
                    ["翼面積", "よくめんせき", "wing area", "площ на крилото"],
                    ["翼幅", "よくはば", "wingspan", "размах на крилата"],
                    ["翼弦", "よくげん", "chord", "хорда"],
                    ["アスペクト比", "あすぺくとひ", "aspect ratio", "съотношение на страните"],
                    ["後退角", "こうたいかく", "sweep angle", "ъгъл на стреловидност"],
                    ["上反角", "じょうはんかく", "dihedral angle", "ъгъл на напречно V"],
                    ["フラップ", "ふらっぷ", "flap", "клапа"],
                    ["エルロン", "えるろん", "aileron", "елерон"],
                    ["エレベーター", "えれべーたー", "elevator", "кормило за височина"],
                    ["ラダー", "らだー", "rudder", "кормило за посока"],
                    ["尾翼", "びよく", "tail wing / empennage", "опашка"],
                    ["胴体", "どうたい", "fuselage", "фюзелаж"],
                    ["降着装置", "こうちゃくそうち", "landing gear", "колесник"],
                    ["プロペラ", "ぷろぺら", "propeller", "витло"]
                ]
            },
            rf: {
                icon: "📡",
                name: "RF Communications",
                nameJp: "無線通信用語",
                words: [
                    ["無線", "むせん", "radio / wireless", "радио / безжичен"],
                    ["周波数", "しゅうはすう", "frequency", "честота"],
                    ["電波", "でんぱ", "radio wave", "радиовълна"],
                    ["送信", "そうしん", "transmission", "предаване"],
                    ["受信", "じゅしん", "reception", "приемане"],
                    ["変調", "へんちょう", "modulation", "модулация"],
                    ["復調", "ふくちょう", "demodulation", "демодулация"],
                    ["帯域", "たいいき", "bandwidth", "честотна лента"],
                    ["出力", "しゅつりょく", "output / power", "мощност"],
                    ["感度", "かんど", "sensitivity", "чувствителност"],
                    ["雑音", "ざつおん", "noise", "шум"],
                    ["干渉", "かんしょう", "interference", "смущения"],
                    ["空中線", "くうちゅうせん", "antenna", "антена"],
                    ["送信機", "そうしんき", "transmitter", "предавател"],
                    ["受信機", "じゅしんき", "receiver", "приемник"],
                    ["増幅器", "ぞうふくき", "amplifier", "усилвател"],
                    ["発振器", "はっしんき", "oscillator", "осцилатор"],
                    ["短波", "たんぱ", "shortwave (HF)", "къси вълни"],
                    ["超短波", "ちょうたんぱ", "VHF", "ултракъси вълни"],
                    ["極超短波", "ごくちょうたんぱ", "UHF", "дециметрови вълни"],
                    ["マイクロ波", "まいくろは", "microwave", "микровълни"],
                    ["電離層", "でんりそう", "ionosphere", "йоносфера"],
                    ["反射", "はんしゃ", "reflection", "отражение"],
                    ["屈折", "くっせつ", "refraction", "пречупване"],
                    ["伝搬", "でんぱん", "propagation", "разпространение"],
                    ["減衰", "げんすい", "attenuation", "затихване"],
                    ["利得", "りとく", "gain", "усилване"],
                    ["指向性", "しこうせい", "directivity", "насоченост"],
                    ["偏波", "へんぱ", "polarization", "поляризация"],
                    ["同軸ケーブル", "どうじくけーぶる", "coaxial cable", "коаксиален кабел"],
                    ["給電線", "きゅうでんせん", "feed line", "захранващ кабел"],
                    ["整合", "せいごう", "matching", "съгласуване"],
                    ["定在波", "ていざいは", "standing wave", "стояща вълна"],
                    ["電力", "でんりょく", "electric power", "електрическа мощност"],
                    ["電圧", "でんあつ", "voltage", "напрежение"],
                    ["電流", "でんりゅう", "current", "ток"],
                    ["抵抗", "ていこう", "resistance", "съпротивление"],
                    ["容量", "ようりょう", "capacitance", "капацитет"],
                    ["誘導", "ゆうどう", "inductance", "индуктивност"],
                    ["共振", "きょうしん", "resonance", "резонанс"],
                    ["濾波器", "ろはき", "filter", "филтър"],
                    ["混合器", "こんごうき", "mixer", "смесител"],
                    ["検波器", "けんぱき", "detector", "детектор"],
                    ["免許", "めんきょ", "license", "лиценз"],
                    ["呼出符号", "よびだしふごう", "call sign", "позивна"],
                    ["交信", "こうしん", "communication", "комуникация"],
                    ["通話", "つうわ", "conversation", "разговор"],
                    ["傍受", "ぼうじゅ", "interception", "прихващане"],
                    ["暗号", "あんごう", "cipher / code", "шифър / код"],
                    ["復号", "ふくごう", "decryption", "декриптиране"]
                ]
            },
            sdr: {
                icon: "📻",
                name: "SDR",
                nameJp: "ソフトウェア無線用語",
                words: [
                    ["軟件無線", "なんけんむせん", "software defined radio", "софтуерно дефинирано радио"],
                    ["標本化", "ひょうほんか", "sampling", "дискретизация"],
                    ["量子化", "りょうしか", "quantization", "квантуване"],
                    ["復号", "ふくごう", "decoding", "декодиране"],
                    ["符号化", "ふごうか", "encoding", "кодиране"],
                    ["信号処理", "しんごうしょり", "signal processing", "обработка на сигнали"],
                    ["波形", "はけい", "waveform", "форма на вълната"],
                    ["位相", "いそう", "phase", "фаза"],
                    ["振幅", "しんぷく", "amplitude", "амплитуда"],
                    ["濾波器", "ろはき", "filter", "филтър"],
                    ["畳み込み", "たたみこみ", "convolution", "конволюция"],
                    ["相関", "そうかん", "correlation", "корелация"],
                    ["変換", "へんかん", "transform", "трансформация"],
                    ["周波数領域", "しゅうはすうりょういき", "frequency domain", "честотна област"],
                    ["時間領域", "じかんりょういき", "time domain", "времева област"],
                    ["帯域幅", "たいいきはば", "bandwidth", "честотна лента"],
                    ["中心周波数", "ちゅうしんしゅうはすう", "center frequency", "централна честота"],
                    ["標本化率", "ひょうほんかりつ", "sampling rate", "честота на дискретизация"],
                    ["量子化誤差", "りょうしかごさ", "quantization error", "грешка на квантуване"],
                    ["動的範囲", "どうてきはんい", "dynamic range", "динамичен обхват"],
                    ["信号対雑音比", "しんごうたいざつおんひ", "signal-to-noise ratio", "отношение сигнал/шум"],
                    ["混信", "こんしん", "interference", "смущения"],
                    ["選択度", "せんたくど", "selectivity", "селективност"],
                    ["感度", "かんど", "sensitivity", "чувствителност"],
                    ["直交", "ちょっこう", "quadrature", "квадратура"],
                    ["複素数", "ふくそすう", "complex number", "комплексно число"],
                    ["実数部", "じっすうぶ", "real part", "реална част"],
                    ["虚数部", "きょすうぶ", "imaginary part", "имагинерна част"],
                    ["振幅変調", "しんぷくへんちょう", "amplitude modulation (AM)", "амплитудна модулация"],
                    ["周波数変調", "しゅうはすうへんちょう", "frequency modulation (FM)", "честотна модулация"],
                    ["位相変調", "いそうへんちょう", "phase modulation (PM)", "фазова модулация"],
                    ["直交振幅変調", "ちょっこうしんぷくへんちょう", "QAM", "квадратурна амплитудна модулация"],
                    ["復調", "ふくちょう", "demodulation", "демодулация"],
                    ["同期", "どうき", "synchronization", "синхронизация"],
                    ["搬送波", "はんそうは", "carrier wave", "носеща вълна"],
                    ["側帯波", "そくたいは", "sideband", "странична лента"],
                    ["雑音指数", "ざつおんしすう", "noise figure", "коефициент на шума"],
                    ["利得", "りとく", "gain", "усилване"],
                    ["増幅", "ぞうふく", "amplification", "усилване"],
                    ["混合", "こんごう", "mixing", "смесване"],
                    ["局部発振器", "きょくぶはっしんき", "local oscillator", "локален осцилатор"],
                    ["中間周波数", "ちゅうかんしゅうはすう", "intermediate frequency (IF)", "междинна честота"],
                    ["基底帯域", "きていたいいき", "baseband", "основна лента"],
                    ["受信感度", "じゅしんかんど", "receiver sensitivity", "чувствителност на приемника"],
                    ["飽和", "ほうわ", "saturation", "насищане"],
                    ["歪み", "ひずみ", "distortion", "изкривяване"],
                    ["線形性", "せんけいせい", "linearity", "линейност"],
                    ["実時間", "じつじかん", "real-time", "реално време"],
                    ["緩衝記憶", "かんしょうきおく", "buffer", "буфер"],
                    ["演算", "えんざん", "computation", "изчисление"]
                ]
            },
            chemistry: {
                icon: "⚗️",
                name: "Chemistry",
                nameJp: "元素・分子用語",
                words: [
                    ["水素", "すいそ", "hydrogen (H)", "водород"],
                    ["酸素", "さんそ", "oxygen (O)", "кислород"],
                    ["窒素", "ちっそ", "nitrogen (N)", "азот"],
                    ["炭素", "たんそ", "carbon (C)", "въглерод"],
                    ["鉄", "てつ", "iron (Fe)", "желязо"],
                    ["銅", "どう", "copper (Cu)", "мед"],
                    ["金", "きん", "gold (Au)", "злато"],
                    ["銀", "ぎん", "silver (Ag)", "сребро"],
                    ["塩素", "えんそ", "chlorine (Cl)", "хлор"],
                    ["硫黄", "いおう", "sulfur (S)", "сяра"],
                    ["燐", "りん", "phosphorus (P)", "фосфор"],
                    ["珪素", "けいそ", "silicon (Si)", "силиций"],
                    ["亜鉛", "あえん", "zinc (Zn)", "цинк"],
                    ["鉛", "なまり", "lead (Pb)", "олово"],
                    ["錫", "すず", "tin (Sn)", "калай"],
                    ["水銀", "すいぎん", "mercury (Hg)", "живак"],
                    ["白金", "はっきん", "platinum (Pt)", "платина"],
                    ["ヘリウム", "へりうむ", "helium (He)", "хелий"],
                    ["ネオン", "ねおん", "neon (Ne)", "неон"],
                    ["アルゴン", "あるごん", "argon (Ar)", "аргон"],
                    ["ナトリウム", "なとりうむ", "sodium (Na)", "натрий"],
                    ["カリウム", "かりうむ", "potassium (K)", "калий"],
                    ["カルシウム", "かるしうむ", "calcium (Ca)", "калций"],
                    ["マグネシウム", "まぐねしうむ", "magnesium (Mg)", "магнезий"],
                    ["アルミニウム", "あるみにうむ", "aluminum (Al)", "алуминий"],
                    ["水", "みず", "water (H₂O)", "вода"],
                    ["二酸化炭素", "にさんかたんそ", "carbon dioxide (CO₂)", "въглероден диоксид"],
                    ["一酸化炭素", "いっさんかたんそ", "carbon monoxide (CO)", "въглероден оксид"],
                    ["塩化ナトリウム", "えんかなとりうむ", "sodium chloride (NaCl)", "натриев хлорид (сол)"],
                    ["アンモニア", "あんもにあ", "ammonia (NH₃)", "амоняк"],
                    ["硫酸", "りゅうさん", "sulfuric acid (H₂SO₄)", "сярна киселина"],
                    ["塩酸", "えんさん", "hydrochloric acid (HCl)", "солна киселина"],
                    ["硝酸", "しょうさん", "nitric acid (HNO₃)", "азотна киселина"],
                    ["元素", "げんそ", "element", "елемент"],
                    ["分子", "ぶんし", "molecule", "молекула"],
                    ["原子", "げんし", "atom", "атом"],
                    ["化合物", "かごうぶつ", "compound", "съединение"],
                    ["反応", "はんのう", "reaction", "реакция"],
                    ["溶液", "ようえき", "solution", "разтвор"],
                    ["溶媒", "ようばい", "solvent", "разтворител"],
                    ["溶質", "ようしつ", "solute", "разтворено вещество"],
                    ["濃度", "のうど", "concentration", "концентрация"],
                    ["酸", "さん", "acid", "киселина"],
                    ["塩基", "えんき", "base / alkali", "основа / алкали"],
                    ["中和", "ちゅうわ", "neutralization", "неутрализация"],
                    ["酸化", "さんか", "oxidation", "окисление"],
                    ["還元", "かんげん", "reduction", "редукция"],
                    ["触媒", "しょくばい", "catalyst", "катализатор"],
                    ["結晶", "けっしょう", "crystal", "кристал"],
                    ["周期表", "しゅうきひょう", "periodic table", "периодична таблица"]
                ]
            },
            school: {
                icon: "🏫",
                name: "School",
                nameJp: "学校用語",
                words: [
                    ["小学校", "しょうがっこう", "elementary school", "начално училище"],
                    ["中学校", "ちゅうがっこう", "junior high school", "прогимназия"],
                    ["高等学校", "こうとうがっこう", "high school", "гимназия"],
                    ["大学", "だいがく", "university", "университет"],
                    ["幼稚園", "ようちえん", "kindergarten", "детска градина"],
                    ["国語", "こくご", "Japanese (language)", "японски език"],
                    ["算数", "さんすう", "arithmetic", "аритметика"],
                    ["数学", "すうがく", "mathematics", "математика"],
                    ["理科", "りか", "science", "природни науки"],
                    ["社会", "しゃかい", "social studies", "обществознание"],
                    ["英語", "えいご", "English", "английски"],
                    ["体育", "たいいく", "physical education", "физическо възпитание"],
                    ["音楽", "おんがく", "music", "музика"],
                    ["美術", "びじゅつ", "art", "изобразително изкуство"],
                    ["歴史", "れきし", "history", "история"],
                    ["地理", "ちり", "geography", "география"],
                    ["物理", "ぶつり", "physics", "физика"],
                    ["化学", "かがく", "chemistry", "химия"],
                    ["生物", "せいぶつ", "biology", "биология"],
                    ["家庭科", "かていか", "home economics", "домашна икономика"],
                    ["教室", "きょうしつ", "classroom", "класна стая"],
                    ["先生", "せんせい", "teacher", "учител"],
                    ["生徒", "せいと", "student", "ученик"],
                    ["学生", "がくせい", "student (university)", "студент"],
                    ["宿題", "しゅくだい", "homework", "домашна работа"],
                    ["試験", "しけん", "exam", "изпит"],
                    ["成績", "せいせき", "grades", "оценки"],
                    ["卒業", "そつぎょう", "graduation", "дипломиране"],
                    ["入学", "にゅうがく", "enrollment", "записване"],
                    ["授業", "じゅぎょう", "class / lesson", "урок"],
                    ["時間割", "じかんわり", "schedule / timetable", "разписание"],
                    ["教科書", "きょうかしょ", "textbook", "учебник"],
                    ["ノート", "のーと", "notebook", "тетрадка"],
                    ["鉛筆", "えんぴつ", "pencil", "молив"],
                    ["消しゴム", "けしごむ", "eraser", "гума"],
                    ["定規", "じょうぎ", "ruler", "линия"],
                    ["黒板", "こくばん", "blackboard", "черна дъска"],
                    ["白板", "はくばん", "whiteboard", "бяла дъска"],
                    ["校長", "こうちょう", "principal", "директор"],
                    ["担任", "たんにん", "homeroom teacher", "класен ръководител"],
                    ["部活", "ぶかつ", "club activities", "извънкласни дейности"],
                    ["運動会", "うんどうかい", "sports day", "спортен ден"],
                    ["文化祭", "ぶんかさい", "school festival", "училищен фестивал"],
                    ["修学旅行", "しゅうがくりょこう", "school trip", "училищна екскурзия"],
                    ["図書館", "としょかん", "library", "библиотека"],
                    ["体育館", "たいいくかん", "gymnasium", "физкултурен салон"],
                    ["校庭", "こうてい", "schoolyard", "училищен двор"],
                    ["出席", "しゅっせき", "attendance", "присъствие"],
                    ["欠席", "けっせき", "absence", "отсъствие"],
                    ["遅刻", "ちこく", "late arrival", "закъснение"]
                ]
            },
            fish: {
                icon: "🐟",
                name: "Fish & Seafood",
                nameJp: "魚介類用語",
                words: [
                    ["鮪", "まぐろ", "tuna", "риба тон"],
                    ["鮭", "さけ", "salmon", "сьомга"],
                    ["鯛", "たい", "sea bream", "ципура"],
                    ["鯖", "さば", "mackerel", "скумрия"],
                    ["鰹", "かつお", "bonito", "паламуд"],
                    ["鰯", "いわし", "sardine", "сардина"],
                    ["鰻", "うなぎ", "eel", "змиорка"],
                    ["鮎", "あゆ", "sweetfish", "сладководна риба аю"],
                    ["鯉", "こい", "carp", "шаран"],
                    ["鱈", "たら", "cod", "треска"],
                    ["鰤", "ぶり", "yellowtail", "жълтоопашата риба"],
                    ["鯵", "あじ", "horse mackerel", "сафрид"],
                    ["鮃", "ひらめ", "flounder", "писия"],
                    ["鰈", "かれい", "flatfish", "калкан"],
                    ["鱸", "すずき", "sea bass", "лаврак"],
                    ["鮒", "ふな", "crucian carp", "караш"],
                    ["鯰", "なまず", "catfish", "сом"],
                    ["鱧", "はも", "pike conger", "морска змиорка"],
                    ["鰆", "さわら", "Spanish mackerel", "испанска скумрия"],
                    ["鯱", "しゃち", "orca / killer whale", "косатка"],
                    ["鯨", "くじら", "whale", "кит"],
                    ["海豚", "いるか", "dolphin", "делфин"],
                    ["鮫", "さめ", "shark", "акула"],
                    ["蟹", "かに", "crab", "рак"],
                    ["海老", "えび", "shrimp", "скарида"],
                    ["烏賊", "いか", "squid", "калмар"],
                    ["蛸", "たこ", "octopus", "октопод"],
                    ["貝", "かい", "shellfish", "мида"],
                    ["牡蠣", "かき", "oyster", "стрида"],
                    ["帆立", "ほたて", "scallop", "мида раковина"],
                    ["海胆", "うに", "sea urchin", "морски таралеж"],
                    ["鮑", "あわび", "abalone", "морско ухо"],
                    ["蛤", "はまぐり", "clam", "мида"],
                    ["浅蜊", "あさり", "short-neck clam", "венерка"],
                    ["蜆", "しじみ", "freshwater clam", "сладководна мида"],
                    ["栄螺", "さざえ", "turban shell", "морски охлюв"],
                    ["海鼠", "なまこ", "sea cucumber", "морски краставици"],
                    ["海月", "くらげ", "jellyfish", "медуза"],
                    ["魚", "さかな", "fish", "риба"],
                    ["刺身", "さしみ", "sashimi", "сашими"],
                    ["寿司", "すし", "sushi", "суши"],
                    ["鮮魚", "せんぎょ", "fresh fish", "прясна риба"],
                    ["養殖", "ようしょく", "aquaculture", "аквакултура"],
                    ["漁業", "ぎょぎょう", "fishing industry", "рибарство"],
                    ["漁師", "りょうし", "fisherman", "рибар"],
                    ["漁船", "ぎょせん", "fishing boat", "рибарска лодка"],
                    ["魚市場", "うおいちば", "fish market", "рибен пазар"],
                    ["鮮度", "せんど", "freshness", "свежест"],
                    ["旬", "しゅん", "in season", "сезонен"],
                    ["活魚", "かつぎょ", "live fish", "жива риба"]
                ]
            }
        };

        // Bulgarian toggle state
        let showBulgarian = false;

        function toggleBulgarian() {
            showBulgarian = !showBulgarian;
            const btn = document.getElementById('bgToggle');
            const indicator = document.getElementById('bgIndicator');
            const container = document.querySelector('.tabs-container');
            
            btn.classList.toggle('active', showBulgarian);
            indicator.textContent = showBulgarian ? 'ON' : 'OFF';
            container.classList.toggle('show-bulgarian', showBulgarian);
            
            // Save preference
            localStorage.setItem('showBulgarian', showBulgarian);
        }

        // Initialize app
        function init() {
            renderTabs();
            updateTotalCount();
            
            // Restore Bulgarian preference
            const savedPref = localStorage.getItem('showBulgarian');
            if (savedPref === 'true') {
                toggleBulgarian();
            }
            
            // Activate first tab
            const firstTab = Object.keys(glossaryData)[0];
            activateTab(firstTab);
        }

        function renderTabs() {
            const header = document.getElementById('tabsHeader');
            const content = document.getElementById('tabsContent');
            
            let headerHtml = '';
            let contentHtml = '';
            
            Object.entries(glossaryData).forEach(([key, topic]) => {
                headerHtml += `
                    <button class="tab-btn" data-tab="${key}" onclick="activateTab('${key}')">
                        <span class="tab-icon">${topic.icon}</span>
                        <span class="tab-name">${topic.name}</span>
                    </button>
                `;
                
                contentHtml += `
                    <div class="tab-content" id="tab-${key}">
                        <h2 class="tab-title">${topic.icon} ${topic.name}</h2>
                        <p class="tab-subtitle">${topic.nameJp} • ${topic.words.length} words</p>
                        
                        <div class="search-box">
                            <input type="text" class="search-input" 
                                   placeholder="🔍 Search (kanji, hiragana, or English)..."
                                   onkeyup="filterTable('${key}', this.value)">
                        </div>
                        
                        <table class="glossary-table" id="table-${key}">
                            <thead>
                                <tr>
                                    <th onclick="sortTable('${key}', 0)">漢字 <span class="sort-icon">↕</span></th>
                                    <th onclick="sortTable('${key}', 1)">ひらがな <span class="sort-icon">↕</span></th>
                                    <th onclick="sortTable('${key}', 2)">English <span class="sort-icon">↕</span></th>
                                    <th class="bg-column" onclick="sortTable('${key}', 3)">Български <span class="sort-icon">↕</span></th>
                                </tr>
                            </thead>
                            <tbody>
                                ${topic.words.map(([kanji, hiragana, english, bulgarian]) => `
                                    <tr>
                                        <td class="kanji"><a href="https://jisho.org/search/${encodeURIComponent(kanji)}" target="_blank" title="Look up on Jisho.org">${kanji}</a></td>
                                        <td class="hiragana">${hiragana}</td>
                                        <td class="english">${english}</td>
                                        <td class="bg-column bulgarian">${bulgarian || ''}</td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                        <div class="no-results" style="display: none;">No matching words found</div>
                    </div>
                `;
            });
            
            header.innerHTML = headerHtml;
            content.innerHTML = contentHtml;
        }

        function activateTab(tabKey) {
            // Update buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.tab === tabKey);
            });
            
            // Update content
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.toggle('active', content.id === `tab-${tabKey}`);
            });
        }

        function updateTotalCount() {
            let total = 0;
            Object.values(glossaryData).forEach(topic => {
                total += topic.words.length;
            });
            document.getElementById('totalCount').textContent = `${total} words across ${Object.keys(glossaryData).length} topics`;
        }

        // Sorting
        const sortState = {};

        function sortTable(tabKey, columnIndex) {
            const table = document.getElementById(`table-${tabKey}`);
            const tbody = table.querySelector('tbody');
            const rows = Array.from(tbody.querySelectorAll('tr'));
            const headers = table.querySelectorAll('th');
            
            // Toggle sort direction
            const currentDir = sortState[`${tabKey}-${columnIndex}`] || 'asc';
            const newDir = currentDir === 'asc' ? 'desc' : 'asc';
            sortState[`${tabKey}-${columnIndex}`] = newDir;
            
            // Update header classes
            headers.forEach((th, i) => {
                th.classList.remove('sort-asc', 'sort-desc');
                if (i === columnIndex) {
                    th.classList.add(newDir === 'asc' ? 'sort-asc' : 'sort-desc');
                }
            });
            
            // Sort rows
            rows.sort((a, b) => {
                const aVal = a.cells[columnIndex].textContent.trim();
                const bVal = b.cells[columnIndex].textContent.trim();
                
                const comparison = aVal.localeCompare(bVal, 'ja');
                return newDir === 'asc' ? comparison : -comparison;
            });
            
            // Re-append rows
            rows.forEach(row => tbody.appendChild(row));
        }

        // Filtering
        function filterTable(tabKey, query) {
            const table = document.getElementById(`table-${tabKey}`);
            const rows = table.querySelectorAll('tbody tr');
            const noResults = document.querySelector(`#tab-${tabKey} .no-results`);
            const lowerQuery = query.toLowerCase().trim();
            
            let visibleCount = 0;
            
            rows.forEach(row => {
                const kanji = row.cells[0].textContent;
                const hiragana = row.cells[1].textContent;
                const english = row.cells[2].textContent.toLowerCase();
                
                const matches = kanji.includes(query) || 
                               hiragana.includes(query) || 
                               english.includes(lowerQuery);
                
                row.classList.toggle('hidden', !matches);
                if (matches) visibleCount++;
            });
            
            noResults.style.display = visibleCount === 0 ? 'block' : 'none';
        }

        // Initialize on load
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
